(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();const Rr=(e,t)=>e===t,Ye=Symbol("solid-proxy"),Qt=Symbol("solid-track"),$t={equals:Rr};let Nn=Pn;const Le=1,St=2,Dn={owned:null,cleanups:null,context:null,owner:null};var J=null;let zt=null,kr=null,X=null,le=null,Te=null,kt=0;function _t(e,t){const n=X,i=J,a=e.length===0,l=t===void 0?i:t,c=a?Dn:{owned:null,cleanups:null,context:l?l.context:null,owner:l},d=a?e:()=>e(()=>me(()=>Bt(c)));J=c,X=null;try{return Qe(d,!0)}finally{X=n,J=i}}function B(e,t){t=t?Object.assign({},$t,t):$t;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=a=>(typeof a=="function"&&(a=a(n.value)),kn(n,a));return[Rn.bind(n),i]}function F(e,t,n){const i=sn(e,t,!1,Le);dt(i)}function pe(e,t,n){Nn=Mr;const i=sn(e,t,!1,Le);(!n||!n.render)&&(i.user=!0),Te?Te.push(i):dt(i)}function ze(e,t,n){n=n?Object.assign({},$t,n):$t;const i=sn(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,dt(i),Rn.bind(i)}function Pr(e){return Qe(e,!1)}function me(e){if(X===null)return e();const t=X;X=null;try{return e()}finally{X=t}}function lt(e,t,n){const i=Array.isArray(e);let a,l=n&&n.defer;return c=>{let d;if(i){d=Array(e.length);for(let _=0;_<e.length;_++)d[_]=e[_]()}else d=e();if(l)return l=!1,c;const g=me(()=>t(d,a,c));return a=d,g}}function Re(e){pe(()=>me(e))}function Pt(e){return J===null||(J.cleanups===null?J.cleanups=[e]:J.cleanups.push(e)),e}function Xt(){return X}function Br(e,t){const n=Symbol("context");return{id:n,Provider:Wr(n),defaultValue:e}}function fe(e){return J&&J.context&&J.context[e.id]!==void 0?J.context[e.id]:e.defaultValue}function Tn(e){const t=ze(e),n=ze(()=>Zt(t()));return n.toArray=()=>{const i=n();return Array.isArray(i)?i:i!=null?[i]:[]},n}function Rn(){if(this.sources&&this.state)if(this.state===Le)dt(this);else{const e=le;le=null,Qe(()=>Et(this),!1),le=e}if(X){const e=this.observers?this.observers.length:0;X.sources?(X.sources.push(this),X.sourceSlots.push(e)):(X.sources=[this],X.sourceSlots=[e]),this.observers?(this.observers.push(X),this.observerSlots.push(X.sources.length-1)):(this.observers=[X],this.observerSlots=[X.sources.length-1])}return this.value}function kn(e,t,n){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&Qe(()=>{for(let a=0;a<e.observers.length;a+=1){const l=e.observers[a],c=zt&&zt.running;c&&zt.disposed.has(l),(c?!l.tState:!l.state)&&(l.pure?le.push(l):Te.push(l),l.observers&&Bn(l)),c||(l.state=Le)}if(le.length>1e6)throw le=[],new Error},!1)),t}function dt(e){if(!e.fn)return;Bt(e);const t=kt;Or(e,e.value,t)}function Or(e,t,n){let i;const a=J,l=X;X=J=e;try{i=e.fn(t)}catch(c){return e.pure&&(e.state=Le,e.owned&&e.owned.forEach(Bt),e.owned=null),e.updatedAt=n+1,On(c)}finally{X=l,J=a}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?kn(e,i):e.value=i,e.updatedAt=n)}function sn(e,t,n,i=Le,a){const l={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:J,context:J?J.context:null,pure:n};return J===null||J!==Dn&&(J.owned?J.owned.push(l):J.owned=[l]),l}function xt(e){if(e.state===0)return;if(e.state===St)return Et(e);if(e.suspense&&me(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<kt);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Le)dt(e);else if(e.state===St){const i=le;le=null,Qe(()=>Et(e,t[0]),!1),le=i}}function Qe(e,t){if(le)return e();let n=!1;t||(le=[]),Te?n=!0:Te=[],kt++;try{const i=e();return Lr(n),i}catch(i){n||(Te=null),le=null,On(i)}}function Lr(e){if(le&&(Pn(le),le=null),e)return;const t=Te;Te=null,t.length&&Qe(()=>Nn(t),!1)}function Pn(e){for(let t=0;t<e.length;t++)xt(e[t])}function Mr(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:xt(i)}for(t=0;t<n;t++)xt(e[t])}function Et(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const a=i.state;a===Le?i!==t&&(!i.updatedAt||i.updatedAt<kt)&&xt(i):a===St&&Et(i,t)}}}function Bn(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=St,n.pure?le.push(n):Te.push(n),n.observers&&Bn(n))}}function Bt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),i=e.sourceSlots.pop(),a=n.observers;if(a&&a.length){const l=a.pop(),c=n.observerSlots.pop();i<a.length&&(l.sourceSlots[c]=i,a[i]=l,n.observerSlots[i]=c)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Bt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Fr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function On(e,t=J){throw Fr(e)}function Zt(e){if(typeof e=="function"&&!e.length)return Zt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const i=Zt(e[n]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return e}function Wr(e,t){return function(i){let a;return F(()=>a=me(()=>(J.context={...J.context,[e]:i.value},Tn(()=>i.children))),void 0),a}}const Ur=Symbol("fallback");function wn(e){for(let t=0;t<e.length;t++)e[t]()}function Gr(e,t,n={}){let i=[],a=[],l=[],c=0,d=t.length>1?[]:null;return Pt(()=>wn(l)),()=>{let g=e()||[],_,y;return g[Qt],me(()=>{let m=g.length,E,I,k,T,R,A,U,M,w;if(m===0)c!==0&&(wn(l),l=[],i=[],a=[],c=0,d&&(d=[])),n.fallback&&(i=[Ur],a[0]=_t(D=>(l[0]=D,n.fallback())),c=1);else if(c===0){for(a=new Array(m),y=0;y<m;y++)i[y]=g[y],a[y]=_t(v);c=m}else{for(k=new Array(m),T=new Array(m),d&&(R=new Array(m)),A=0,U=Math.min(c,m);A<U&&i[A]===g[A];A++);for(U=c-1,M=m-1;U>=A&&M>=A&&i[U]===g[M];U--,M--)k[M]=a[U],T[M]=l[U],d&&(R[M]=d[U]);for(E=new Map,I=new Array(M+1),y=M;y>=A;y--)w=g[y],_=E.get(w),I[y]=_===void 0?-1:_,E.set(w,y);for(_=A;_<=U;_++)w=i[_],y=E.get(w),y!==void 0&&y!==-1?(k[y]=a[_],T[y]=l[_],d&&(R[y]=d[_]),y=I[y],E.set(w,y)):l[_]();for(y=A;y<m;y++)y in k?(a[y]=k[y],l[y]=T[y],d&&(d[y]=R[y],d[y](y))):a[y]=_t(v);a=a.slice(0,c=m),i=g.slice(0)}return a});function v(m){if(l[y]=m,d){const[E,I]=B(y);return d[y]=I,t(g[y],E)}return t(g[y])}}}function Y(e,t){return me(()=>e(t||{}))}const Ln=e=>`Stale read from <${e}>.`;function je(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ze(Gr(()=>e.each,e.children,t||void 0))}function Mn(e){const t=e.keyed,n=ze(()=>e.when,void 0,{equals:(i,a)=>t?i===a:!i==!a});return ze(()=>{const i=n();if(i){const a=e.children;return typeof a=="function"&&a.length>0?me(()=>a(t?i:()=>{if(!me(n))throw Ln("Show");return e.when})):a}return e.fallback},void 0,void 0)}function Yr(e){let t=!1;const n=(l,c)=>(t?l[1]===c[1]:!l[1]==!c[1])&&l[2]===c[2],i=Tn(()=>e.children),a=ze(()=>{let l=i();Array.isArray(l)||(l=[l]);for(let c=0;c<l.length;c++){const d=l[c].when;if(d)return t=!!l[c].keyed,[c,d,l[c]]}return[-1]},void 0,{equals:n});return ze(()=>{const[l,c,d]=a();if(l<0)return e.fallback;const g=d.children;return typeof g=="function"&&g.length>0?me(()=>g(t?c:()=>{if(me(a)[0]!==l)throw Ln("Match");return d.when})):g},void 0,void 0)}function _n(e){return e}function zr(e,t,n){let i=n.length,a=t.length,l=i,c=0,d=0,g=t[a-1].nextSibling,_=null;for(;c<a||d<l;){if(t[c]===n[d]){c++,d++;continue}for(;t[a-1]===n[l-1];)a--,l--;if(a===c){const y=l<i?d?n[d-1].nextSibling:n[l-d]:g;for(;d<l;)e.insertBefore(n[d++],y)}else if(l===d)for(;c<a;)(!_||!_.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[l-1]&&n[d]===t[a-1]){const y=t[--a].nextSibling;e.insertBefore(n[d++],t[c++].nextSibling),e.insertBefore(n[--l],y),t[a]=n[l]}else{if(!_){_=new Map;let v=d;for(;v<l;)_.set(n[v],v++)}const y=_.get(t[c]);if(y!=null)if(d<y&&y<l){let v=c,m=1,E;for(;++v<a&&v<l&&!((E=_.get(t[v]))==null||E!==y+m);)m++;if(m>y-d){const I=t[c];for(;d<y;)e.insertBefore(n[d++],I)}else e.replaceChild(n[d++],t[c++])}else c++;else t[c++].remove()}}}const $n="_$DX_DELEGATE";function jr(e,t,n,i={}){let a;return _t(l=>{a=l,t===document?e():W(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{a(),t.textContent=""}}function q(e,t,n){let i;const a=()=>{const c=document.createElement("template");return c.innerHTML=e,n?c.content.firstChild.firstChild:c.content.firstChild},l=t?()=>me(()=>document.importNode(i||(i=a()),!0)):()=>(i||(i=a())).cloneNode(!0);return l.cloneNode=l,l}function we(e,t=window.document){const n=t[$n]||(t[$n]=new Set);for(let i=0,a=e.length;i<a;i++){const l=e[i];n.has(l)||(n.add(l),t.addEventListener(l,Vr))}}function ye(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Hr(e,t){t==null?e.removeAttribute("class"):e.className=t}function ce(e,t,n){return me(()=>e(t,n))}function W(e,t,n,i){if(n!==void 0&&!i&&(i=[]),typeof t!="function")return Ct(e,t,i,n);F(a=>Ct(e,t(),a,n),i)}function Vr(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const i=n[t];if(i&&!n.disabled){const a=n[`${t}Data`];if(a!==void 0?i.call(n,a,e):i.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Ct(e,t,n,i,a){for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,c=i!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(t=t.toString()),c){let d=n[0];d&&d.nodeType===3?d.data!==t&&(d.data=t):d=document.createTextNode(t),n=Je(e,n,i,d)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||l==="boolean")n=Je(e,n,i);else{if(l==="function")return F(()=>{let d=t();for(;typeof d=="function";)d=d();n=Ct(e,d,n,i)}),()=>n;if(Array.isArray(t)){const d=[],g=n&&Array.isArray(n);if(en(d,t,n,a))return F(()=>n=Ct(e,d,n,i,!0)),()=>n;if(d.length===0){if(n=Je(e,n,i),c)return n}else g?n.length===0?Sn(e,d,i):zr(e,n,d):(n&&Je(e),Sn(e,d));n=d}else if(t.nodeType){if(Array.isArray(n)){if(c)return n=Je(e,n,i,t);Je(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function en(e,t,n,i){let a=!1;for(let l=0,c=t.length;l<c;l++){let d=t[l],g=n&&n[e.length],_;if(!(d==null||d===!0||d===!1))if((_=typeof d)=="object"&&d.nodeType)e.push(d);else if(Array.isArray(d))a=en(e,d,g)||a;else if(_==="function")if(i){for(;typeof d=="function";)d=d();a=en(e,Array.isArray(d)?d:[d],Array.isArray(g)?g:[g])||a}else e.push(d),a=!0;else{const y=String(d);g&&g.nodeType===3&&g.data===y?e.push(g):e.push(document.createTextNode(y))}}return a}function Sn(e,t,n=null){for(let i=0,a=t.length;i<a;i++)e.insertBefore(t[i],n)}function Je(e,t,n,i){if(n===void 0)return e.textContent="";const a=i||document.createTextNode("");if(t.length){let l=!1;for(let c=t.length-1;c>=0;c--){const d=t[c];if(a!==d){const g=d.parentNode===e;!l&&!c?g?e.replaceChild(a,d):e.insertBefore(a,n):g&&d.remove()}else l=!0}}else e.insertBefore(a,n);return[a]}var Kr=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},tn;typeof window<"u"&&(typeof Promise<"u"?tn=new Promise(function(e){return window.addEventListener("load",e)}):tn={then:function(e){return window.addEventListener("load",e)}});function Jr(e,t){t===void 0&&(t={});var n=t.registrationOptions;n===void 0&&(n={}),delete t.registrationOptions;var i=function(a){for(var l=[],c=arguments.length-1;c-- >0;)l[c]=arguments[c+1];t&&t[a]&&t[a].apply(t,l)};"serviceWorker"in navigator&&tn.then(function(){Kr()?(qr(e,i,n),navigator.serviceWorker.ready.then(function(a){i("ready",a)}).catch(function(a){return st(i,a)})):(Fn(e,i,n),navigator.serviceWorker.ready.then(function(a){i("ready",a)}).catch(function(a){return st(i,a)}))})}function st(e,t){navigator.onLine||e("offline"),e("error",t)}function Fn(e,t,n){navigator.serviceWorker.register(e,n).then(function(i){if(t("registered",i),i.waiting){t("updated",i);return}i.onupdatefound=function(){t("updatefound",i);var a=i.installing;a.onstatechange=function(){a.state==="installed"&&(navigator.serviceWorker.controller?t("updated",i):t("cached",i))}}}).catch(function(i){return st(t,i)})}function qr(e,t,n){fetch(e).then(function(i){i.status===404?(t("error",new Error("Service worker not found at "+e)),xn()):i.headers.get("content-type").indexOf("javascript")===-1?(t("error",new Error("Expected "+e+" to have javascript content-type, but received "+i.headers.get("content-type"))),xn()):Fn(e,t,n)}).catch(function(i){return st(t,i)})}function xn(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){return st(emit,e)})}function Qr(){Jr("/work-diary/serviceworker.js")}const Xr=async()=>Notification.permission==="granted",Zr=async()=>{if(await Notification.requestPermission()!=="granted")throw new Error("Notification permission not granted")};var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ei(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function bt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wn={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(i,a,l){function c(_,y){if(!a[_]){if(!i[_]){var v=typeof bt=="function"&&bt;if(!y&&v)return v(_,!0);if(d)return d(_,!0);var m=new Error("Cannot find module '"+_+"'");throw m.code="MODULE_NOT_FOUND",m}var E=a[_]={exports:{}};i[_][0].call(E.exports,function(I){var k=i[_][1][I];return c(k||I)},E,E.exports,n,i,a,l)}return a[_].exports}for(var d=typeof bt=="function"&&bt,g=0;g<l.length;g++)c(l[g]);return c}({1:[function(n,i,a){(function(l){var c=l.MutationObserver||l.WebKitMutationObserver,d;if(c){var g=0,_=new c(I),y=l.document.createTextNode("");_.observe(y,{characterData:!0}),d=function(){y.data=g=++g%2}}else if(!l.setImmediate&&typeof l.MessageChannel<"u"){var v=new l.MessageChannel;v.port1.onmessage=I,d=function(){v.port2.postMessage(0)}}else"document"in l&&"onreadystatechange"in l.document.createElement("script")?d=function(){var T=l.document.createElement("script");T.onreadystatechange=function(){I(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},l.document.documentElement.appendChild(T)}:d=function(){setTimeout(I,0)};var m,E=[];function I(){m=!0;for(var T,R,A=E.length;A;){for(R=E,E=[],T=-1;++T<A;)R[T]();A=E.length}m=!1}i.exports=k;function k(T){E.push(T)===1&&!m&&d()}}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,i,a){var l=n(1);function c(){}var d={},g=["REJECTED"],_=["FULFILLED"],y=["PENDING"];i.exports=v;function v(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,w!==c&&k(this,w)}v.prototype.catch=function(w){return this.then(null,w)},v.prototype.then=function(w,D){if(typeof w!="function"&&this.state===_||typeof D!="function"&&this.state===g)return this;var N=new this.constructor(c);if(this.state!==y){var P=this.state===_?w:D;E(N,P,this.outcome)}else this.queue.push(new m(N,w,D));return N};function m(w,D,N){this.promise=w,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(w){d.resolve(this.promise,w)},m.prototype.otherCallFulfilled=function(w){E(this.promise,this.onFulfilled,w)},m.prototype.callRejected=function(w){d.reject(this.promise,w)},m.prototype.otherCallRejected=function(w){E(this.promise,this.onRejected,w)};function E(w,D,N){l(function(){var P;try{P=D(N)}catch(j){return d.reject(w,j)}P===w?d.reject(w,new TypeError("Cannot resolve promise with itself")):d.resolve(w,P)})}d.resolve=function(w,D){var N=T(I,D);if(N.status==="error")return d.reject(w,N.value);var P=N.value;if(P)k(w,P);else{w.state=_,w.outcome=D;for(var j=-1,H=w.queue.length;++j<H;)w.queue[j].callFulfilled(D)}return w},d.reject=function(w,D){w.state=g,w.outcome=D;for(var N=-1,P=w.queue.length;++N<P;)w.queue[N].callRejected(D);return w};function I(w){var D=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof D=="function")return function(){D.apply(w,arguments)}}function k(w,D){var N=!1;function P(V){N||(N=!0,d.reject(w,V))}function j(V){N||(N=!0,d.resolve(w,V))}function H(){D(j,P)}var Z=T(H);Z.status==="error"&&P(Z.value)}function T(w,D){var N={};try{N.value=w(D),N.status="success"}catch(P){N.status="error",N.value=P}return N}v.resolve=R;function R(w){return w instanceof this?w:d.resolve(new this(c),w)}v.reject=A;function A(w){var D=new this(c);return d.reject(D,w)}v.all=U;function U(w){var D=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=w.length,P=!1;if(!N)return this.resolve([]);for(var j=new Array(N),H=0,Z=-1,V=new this(c);++Z<N;)oe(w[Z],Z);return V;function oe(de,_e){D.resolve(de).then(ae,function(he){P||(P=!0,d.reject(V,he))});function ae(he){j[_e]=he,++H===N&&!P&&(P=!0,d.resolve(V,j))}}}v.race=M;function M(w){var D=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=w.length,P=!1;if(!N)return this.resolve([]);for(var j=-1,H=new this(c);++j<N;)Z(w[j]);return H;function Z(V){D.resolve(V).then(function(oe){P||(P=!0,d.resolve(H,oe))},function(oe){P||(P=!0,d.reject(H,oe))})}}},{1:1}],3:[function(n,i,a){(function(l){typeof l.Promise!="function"&&(l.Promise=n(2))}).call(this,typeof mt<"u"?mt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,i,a){var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function c(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function d(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var g=d();function _(){try{if(!g||!g.open)return!1;var r=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),s=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!r||s)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function y(r,s){r=r||[],s=s||{};try{return new Blob(r,s)}catch(u){if(u.name!=="TypeError")throw u;for(var o=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,f=new o,h=0;h<r.length;h+=1)f.append(r[h]);return f.getBlob(s.type)}}typeof Promise>"u"&&n(3);var v=Promise;function m(r,s){s&&r.then(function(o){s(null,o)},function(o){s(o)})}function E(r,s,o){typeof s=="function"&&r.then(s),typeof o=="function"&&r.catch(o)}function I(r){return typeof r!="string"&&(console.warn(r+" used as a key, but it is not a string."),r=String(r)),r}function k(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",R=void 0,A={},U=Object.prototype.toString,M="readonly",w="readwrite";function D(r){for(var s=r.length,o=new ArrayBuffer(s),f=new Uint8Array(o),h=0;h<s;h++)f[h]=r.charCodeAt(h);return o}function N(r){return new v(function(s){var o=r.transaction(T,w),f=y([""]);o.objectStore(T).put(f,"key"),o.onabort=function(h){h.preventDefault(),h.stopPropagation(),s(!1)},o.oncomplete=function(){var h=navigator.userAgent.match(/Chrome\/(\d+)/),u=navigator.userAgent.match(/Edge\//);s(u||!h||parseInt(h[1],10)>=43)}}).catch(function(){return!1})}function P(r){return typeof R=="boolean"?v.resolve(R):N(r).then(function(s){return R=s,R})}function j(r){var s=A[r.name],o={};o.promise=new v(function(f,h){o.resolve=f,o.reject=h}),s.deferredOperations.push(o),s.dbReady?s.dbReady=s.dbReady.then(function(){return o.promise}):s.dbReady=o.promise}function H(r){var s=A[r.name],o=s.deferredOperations.pop();if(o)return o.resolve(),o.promise}function Z(r,s){var o=A[r.name],f=o.deferredOperations.pop();if(f)return f.reject(s),f.promise}function V(r,s){return new v(function(o,f){if(A[r.name]=A[r.name]||xe(),r.db)if(s)j(r),r.db.close();else return o(r.db);var h=[r.name];s&&h.push(r.version);var u=g.open.apply(g,h);s&&(u.onupgradeneeded=function(p){var b=u.result;try{b.createObjectStore(r.storeName),p.oldVersion<=1&&b.createObjectStore(T)}catch($){if($.name==="ConstraintError")console.warn('The database "'+r.name+'" has been upgraded from version '+p.oldVersion+" to version "+p.newVersion+', but the storage "'+r.storeName+'" already exists.');else throw $}}),u.onerror=function(p){p.preventDefault(),f(u.error)},u.onsuccess=function(){var p=u.result;p.onversionchange=function(b){b.target.close()},o(p),H(r)}})}function oe(r){return V(r,!1)}function de(r){return V(r,!0)}function _e(r,s){if(!r.db)return!0;var o=!r.db.objectStoreNames.contains(r.storeName),f=r.version<r.db.version,h=r.version>r.db.version;if(f&&(r.version!==s&&console.warn('The database "'+r.name+`" can't be downgraded from version `+r.db.version+" to version "+r.version+"."),r.version=r.db.version),h||o){if(o){var u=r.db.version+1;u>r.version&&(r.version=u)}return!0}return!1}function ae(r){return new v(function(s,o){var f=new FileReader;f.onerror=o,f.onloadend=function(h){var u=btoa(h.target.result||"");s({__local_forage_encoded_blob:!0,data:u,type:r.type})},f.readAsBinaryString(r)})}function he(r){var s=D(atob(r.data));return y([s],{type:r.type})}function $e(r){return r&&r.__local_forage_encoded_blob}function Ae(r){var s=this,o=s._initReady().then(function(){var f=A[s._dbInfo.name];if(f&&f.dbReady)return f.dbReady});return E(o,r,r),o}function Se(r){j(r);for(var s=A[r.name],o=s.forages,f=0;f<o.length;f++){var h=o[f];h._dbInfo.db&&(h._dbInfo.db.close(),h._dbInfo.db=null)}return r.db=null,oe(r).then(function(u){return r.db=u,_e(r)?de(r):u}).then(function(u){r.db=s.db=u;for(var p=0;p<o.length;p++)o[p]._dbInfo.db=u}).catch(function(u){throw Z(r,u),u})}function te(r,s,o,f){f===void 0&&(f=1);try{var h=r.db.transaction(r.storeName,s);o(null,h)}catch(u){if(f>0&&(!r.db||u.name==="InvalidStateError"||u.name==="NotFoundError"))return v.resolve().then(function(){if(!r.db||u.name==="NotFoundError"&&!r.db.objectStoreNames.contains(r.storeName)&&r.version<=r.db.version)return r.db&&(r.version=r.db.version+1),de(r)}).then(function(){return Se(r).then(function(){te(r,s,o,f-1)})}).catch(o);o(u)}}function xe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(r){var s=this,o={db:null};if(r)for(var f in r)o[f]=r[f];var h=A[o.name];h||(h=xe(),A[o.name]=h),h.forages.push(s),s._initReady||(s._initReady=s.ready,s.ready=Ae);var u=[];function p(){return v.resolve()}for(var b=0;b<h.forages.length;b++){var $=h.forages[b];$!==s&&u.push($._initReady().catch(p))}var S=h.forages.slice(0);return v.all(u).then(function(){return o.db=h.db,oe(o)}).then(function(x){return o.db=x,_e(o,s._defaultConfig.version)?de(o):x}).then(function(x){o.db=h.db=x,s._dbInfo=o;for(var C=0;C<S.length;C++){var O=S[C];O!==s&&(O._dbInfo.db=o.db,O._dbInfo.version=o.version)}})}function ne(r,s){var o=this;r=I(r);var f=new v(function(h,u){o.ready().then(function(){te(o._dbInfo,M,function(p,b){if(p)return u(p);try{var $=b.objectStore(o._dbInfo.storeName),S=$.get(r);S.onsuccess=function(){var x=S.result;x===void 0&&(x=null),$e(x)&&(x=he(x)),h(x)},S.onerror=function(){u(S.error)}}catch(x){u(x)}})}).catch(u)});return m(f,s),f}function K(r,s){var o=this,f=new v(function(h,u){o.ready().then(function(){te(o._dbInfo,M,function(p,b){if(p)return u(p);try{var $=b.objectStore(o._dbInfo.storeName),S=$.openCursor(),x=1;S.onsuccess=function(){var C=S.result;if(C){var O=C.value;$e(O)&&(O=he(O));var G=r(O,C.key,x++);G!==void 0?h(G):C.continue()}else h()},S.onerror=function(){u(S.error)}}catch(C){u(C)}})}).catch(u)});return m(f,s),f}function ge(r,s,o){var f=this;r=I(r);var h=new v(function(u,p){var b;f.ready().then(function(){return b=f._dbInfo,U.call(s)==="[object Blob]"?P(b.db).then(function($){return $?s:ae(s)}):s}).then(function($){te(f._dbInfo,w,function(S,x){if(S)return p(S);try{var C=x.objectStore(f._dbInfo.storeName);$===null&&($=void 0);var O=C.put($,r);x.oncomplete=function(){$===void 0&&($=null),u($)},x.onabort=x.onerror=function(){var G=O.error?O.error:O.transaction.error;p(G)}}catch(G){p(G)}})}).catch(p)});return m(h,o),h}function ke(r,s){var o=this;r=I(r);var f=new v(function(h,u){o.ready().then(function(){te(o._dbInfo,w,function(p,b){if(p)return u(p);try{var $=b.objectStore(o._dbInfo.storeName),S=$.delete(r);b.oncomplete=function(){h()},b.onerror=function(){u(S.error)},b.onabort=function(){var x=S.error?S.error:S.transaction.error;u(x)}}catch(x){u(x)}})}).catch(u)});return m(f,s),f}function Me(r){var s=this,o=new v(function(f,h){s.ready().then(function(){te(s._dbInfo,w,function(u,p){if(u)return h(u);try{var b=p.objectStore(s._dbInfo.storeName),$=b.clear();p.oncomplete=function(){f()},p.onabort=p.onerror=function(){var S=$.error?$.error:$.transaction.error;h(S)}}catch(S){h(S)}})}).catch(h)});return m(o,r),o}function Fe(r){var s=this,o=new v(function(f,h){s.ready().then(function(){te(s._dbInfo,M,function(u,p){if(u)return h(u);try{var b=p.objectStore(s._dbInfo.storeName),$=b.count();$.onsuccess=function(){f($.result)},$.onerror=function(){h($.error)}}catch(S){h(S)}})}).catch(h)});return m(o,r),o}function Pe(r,s){var o=this,f=new v(function(h,u){if(r<0){h(null);return}o.ready().then(function(){te(o._dbInfo,M,function(p,b){if(p)return u(p);try{var $=b.objectStore(o._dbInfo.storeName),S=!1,x=$.openKeyCursor();x.onsuccess=function(){var C=x.result;if(!C){h(null);return}r===0||S?h(C.key):(S=!0,C.advance(r))},x.onerror=function(){u(x.error)}}catch(C){u(C)}})}).catch(u)});return m(f,s),f}function Xe(r){var s=this,o=new v(function(f,h){s.ready().then(function(){te(s._dbInfo,M,function(u,p){if(u)return h(u);try{var b=p.objectStore(s._dbInfo.storeName),$=b.openKeyCursor(),S=[];$.onsuccess=function(){var x=$.result;if(!x){f(S);return}S.push(x.key),x.continue()},$.onerror=function(){h($.error)}}catch(x){h(x)}})}).catch(h)});return m(o,r),o}function gt(r,s){s=k.apply(this,arguments);var o=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||o.name,r.storeName=r.storeName||o.storeName);var f=this,h;if(!r.name)h=v.reject("Invalid arguments");else{var u=r.name===o.name&&f._dbInfo.db,p=u?v.resolve(f._dbInfo.db):oe(r).then(function(b){var $=A[r.name],S=$.forages;$.db=b;for(var x=0;x<S.length;x++)S[x]._dbInfo.db=b;return b});r.storeName?h=p.then(function(b){if(b.objectStoreNames.contains(r.storeName)){var $=b.version+1;j(r);var S=A[r.name],x=S.forages;b.close();for(var C=0;C<x.length;C++){var O=x[C];O._dbInfo.db=null,O._dbInfo.version=$}var G=new v(function(z,ee){var Q=g.open(r.name,$);Q.onerror=function(be){var ot=Q.result;ot.close(),ee(be)},Q.onupgradeneeded=function(){var be=Q.result;be.deleteObjectStore(r.storeName)},Q.onsuccess=function(){var be=Q.result;be.close(),z(be)}});return G.then(function(z){S.db=z;for(var ee=0;ee<x.length;ee++){var Q=x[ee];Q._dbInfo.db=z,H(Q._dbInfo)}}).catch(function(z){throw(Z(r,z)||v.resolve()).catch(function(){}),z})}}):h=p.then(function(b){j(r);var $=A[r.name],S=$.forages;b.close();for(var x=0;x<S.length;x++){var C=S[x];C._dbInfo.db=null}var O=new v(function(G,z){var ee=g.deleteDatabase(r.name);ee.onerror=function(){var Q=ee.result;Q&&Q.close(),z(ee.error)},ee.onblocked=function(){console.warn('dropInstance blocked for database "'+r.name+'" until all open connections are closed')},ee.onsuccess=function(){var Q=ee.result;Q&&Q.close(),G(Q)}});return O.then(function(G){$.db=G;for(var z=0;z<S.length;z++){var ee=S[z];H(ee._dbInfo)}}).catch(function(G){throw(Z(r,G)||v.resolve()).catch(function(){}),G})})}return m(h,s),h}var Ot={_driver:"asyncStorage",_initStorage:L,_support:_(),iterate:K,getItem:ne,setItem:ge,removeItem:ke,clear:Me,length:Fe,key:Pe,keys:Xe,dropInstance:gt};function Lt(){return typeof openDatabase=="function"}var ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vt="~~local_forage_type~",Ze=/^~~local_forage_type~([^~]+)~/,Ve="__lfsc__:",We=Ve.length,et="arbf",Ue="blob",pt="si08",tt="ui08",nt="uic8",rt="si16",re="si32",ve="ur16",Be="ui32",un="fl32",cn="fl64",fn=We+et.length,dn=Object.prototype.toString;function hn(r){var s=r.length*.75,o=r.length,f,h=0,u,p,b,$;r[r.length-1]==="="&&(s--,r[r.length-2]==="="&&s--);var S=new ArrayBuffer(s),x=new Uint8Array(S);for(f=0;f<o;f+=4)u=ue.indexOf(r[f]),p=ue.indexOf(r[f+1]),b=ue.indexOf(r[f+2]),$=ue.indexOf(r[f+3]),x[h++]=u<<2|p>>4,x[h++]=(p&15)<<4|b>>2,x[h++]=(b&3)<<6|$&63;return S}function Mt(r){var s=new Uint8Array(r),o="",f;for(f=0;f<s.length;f+=3)o+=ue[s[f]>>2],o+=ue[(s[f]&3)<<4|s[f+1]>>4],o+=ue[(s[f+1]&15)<<2|s[f+2]>>6],o+=ue[s[f+2]&63];return s.length%3===2?o=o.substring(0,o.length-1)+"=":s.length%3===1&&(o=o.substring(0,o.length-2)+"=="),o}function Kn(r,s){var o="";if(r&&(o=dn.call(r)),r&&(o==="[object ArrayBuffer]"||r.buffer&&dn.call(r.buffer)==="[object ArrayBuffer]")){var f,h=Ve;r instanceof ArrayBuffer?(f=r,h+=et):(f=r.buffer,o==="[object Int8Array]"?h+=pt:o==="[object Uint8Array]"?h+=tt:o==="[object Uint8ClampedArray]"?h+=nt:o==="[object Int16Array]"?h+=rt:o==="[object Uint16Array]"?h+=ve:o==="[object Int32Array]"?h+=re:o==="[object Uint32Array]"?h+=Be:o==="[object Float32Array]"?h+=un:o==="[object Float64Array]"?h+=cn:s(new Error("Failed to get type for BinaryArray"))),s(h+Mt(f))}else if(o==="[object Blob]"){var u=new FileReader;u.onload=function(){var p=vt+r.type+"~"+Mt(this.result);s(Ve+Ue+p)},u.readAsArrayBuffer(r)}else try{s(JSON.stringify(r))}catch(p){console.error("Couldn't convert value into a JSON string: ",r),s(null,p)}}function Jn(r){if(r.substring(0,We)!==Ve)return JSON.parse(r);var s=r.substring(fn),o=r.substring(We,fn),f;if(o===Ue&&Ze.test(s)){var h=s.match(Ze);f=h[1],s=s.substring(h[0].length)}var u=hn(s);switch(o){case et:return u;case Ue:return y([u],{type:f});case pt:return new Int8Array(u);case tt:return new Uint8Array(u);case nt:return new Uint8ClampedArray(u);case rt:return new Int16Array(u);case ve:return new Uint16Array(u);case re:return new Int32Array(u);case Be:return new Uint32Array(u);case un:return new Float32Array(u);case cn:return new Float64Array(u);default:throw new Error("Unkown type: "+o)}}var Ft={serialize:Kn,deserialize:Jn,stringToBuffer:hn,bufferToString:Mt};function gn(r,s,o,f){r.executeSql("CREATE TABLE IF NOT EXISTS "+s.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],o,f)}function qn(r){var s=this,o={db:null};if(r)for(var f in r)o[f]=typeof r[f]!="string"?r[f].toString():r[f];var h=new v(function(u,p){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(b){return p(b)}o.db.transaction(function(b){gn(b,o,function(){s._dbInfo=o,u()},function($,S){p(S)})},p)});return o.serializer=Ft,h}function Oe(r,s,o,f,h,u){r.executeSql(o,f,h,function(p,b){b.code===b.SYNTAX_ERR?p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[s.storeName],function($,S){S.rows.length?u($,b):gn($,s,function(){$.executeSql(o,f,h,u)},u)},u):u(p,b)},u)}function Qn(r,s){var o=this;r=I(r);var f=new v(function(h,u){o.ready().then(function(){var p=o._dbInfo;p.db.transaction(function(b){Oe(b,p,"SELECT * FROM "+p.storeName+" WHERE key = ? LIMIT 1",[r],function($,S){var x=S.rows.length?S.rows.item(0).value:null;x&&(x=p.serializer.deserialize(x)),h(x)},function($,S){u(S)})})}).catch(u)});return m(f,s),f}function Xn(r,s){var o=this,f=new v(function(h,u){o.ready().then(function(){var p=o._dbInfo;p.db.transaction(function(b){Oe(b,p,"SELECT * FROM "+p.storeName,[],function($,S){for(var x=S.rows,C=x.length,O=0;O<C;O++){var G=x.item(O),z=G.value;if(z&&(z=p.serializer.deserialize(z)),z=r(z,G.key,O+1),z!==void 0){h(z);return}}h()},function($,S){u(S)})})}).catch(u)});return m(f,s),f}function vn(r,s,o,f){var h=this;r=I(r);var u=new v(function(p,b){h.ready().then(function(){s===void 0&&(s=null);var $=s,S=h._dbInfo;S.serializer.serialize(s,function(x,C){C?b(C):S.db.transaction(function(O){Oe(O,S,"INSERT OR REPLACE INTO "+S.storeName+" (key, value) VALUES (?, ?)",[r,x],function(){p($)},function(G,z){b(z)})},function(O){if(O.code===O.QUOTA_ERR){if(f>0){p(vn.apply(h,[r,$,o,f-1]));return}b(O)}})})}).catch(b)});return m(u,o),u}function Zn(r,s,o){return vn.apply(this,[r,s,o,1])}function er(r,s){var o=this;r=I(r);var f=new v(function(h,u){o.ready().then(function(){var p=o._dbInfo;p.db.transaction(function(b){Oe(b,p,"DELETE FROM "+p.storeName+" WHERE key = ?",[r],function(){h()},function($,S){u(S)})})}).catch(u)});return m(f,s),f}function tr(r){var s=this,o=new v(function(f,h){s.ready().then(function(){var u=s._dbInfo;u.db.transaction(function(p){Oe(p,u,"DELETE FROM "+u.storeName,[],function(){f()},function(b,$){h($)})})}).catch(h)});return m(o,r),o}function nr(r){var s=this,o=new v(function(f,h){s.ready().then(function(){var u=s._dbInfo;u.db.transaction(function(p){Oe(p,u,"SELECT COUNT(key) as c FROM "+u.storeName,[],function(b,$){var S=$.rows.item(0).c;f(S)},function(b,$){h($)})})}).catch(h)});return m(o,r),o}function rr(r,s){var o=this,f=new v(function(h,u){o.ready().then(function(){var p=o._dbInfo;p.db.transaction(function(b){Oe(b,p,"SELECT key FROM "+p.storeName+" WHERE id = ? LIMIT 1",[r+1],function($,S){var x=S.rows.length?S.rows.item(0).key:null;h(x)},function($,S){u(S)})})}).catch(u)});return m(f,s),f}function ir(r){var s=this,o=new v(function(f,h){s.ready().then(function(){var u=s._dbInfo;u.db.transaction(function(p){Oe(p,u,"SELECT key FROM "+u.storeName,[],function(b,$){for(var S=[],x=0;x<$.rows.length;x++)S.push($.rows.item(x).key);f(S)},function(b,$){h($)})})}).catch(h)});return m(o,r),o}function or(r){return new v(function(s,o){r.transaction(function(f){f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(h,u){for(var p=[],b=0;b<u.rows.length;b++)p.push(u.rows.item(b).name);s({db:r,storeNames:p})},function(h,u){o(u)})},function(f){o(f)})})}function ar(r,s){s=k.apply(this,arguments);var o=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||o.name,r.storeName=r.storeName||o.storeName);var f=this,h;return r.name?h=new v(function(u){var p;r.name===o.name?p=f._dbInfo.db:p=openDatabase(r.name,"","",0),r.storeName?u({db:p,storeNames:[r.storeName]}):u(or(p))}).then(function(u){return new v(function(p,b){u.db.transaction(function($){function S(G){return new v(function(z,ee){$.executeSql("DROP TABLE IF EXISTS "+G,[],function(){z()},function(Q,be){ee(be)})})}for(var x=[],C=0,O=u.storeNames.length;C<O;C++)x.push(S(u.storeNames[C]));v.all(x).then(function(){p()}).catch(function(G){b(G)})},function($){b($)})})}):h=v.reject("Invalid arguments"),m(h,s),h}var lr={_driver:"webSQLStorage",_initStorage:qn,_support:Lt(),iterate:Xn,getItem:Qn,setItem:Zn,removeItem:er,clear:tr,length:nr,key:rr,keys:ir,dropInstance:ar};function sr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function pn(r,s){var o=r.name+"/";return r.storeName!==s.storeName&&(o+=r.storeName+"/"),o}function ur(){var r="_localforage_support_test";try{return localStorage.setItem(r,!0),localStorage.removeItem(r),!1}catch{return!0}}function cr(){return!ur()||localStorage.length>0}function fr(r){var s=this,o={};if(r)for(var f in r)o[f]=r[f];return o.keyPrefix=pn(r,s._defaultConfig),cr()?(s._dbInfo=o,o.serializer=Ft,v.resolve()):v.reject()}function dr(r){var s=this,o=s.ready().then(function(){for(var f=s._dbInfo.keyPrefix,h=localStorage.length-1;h>=0;h--){var u=localStorage.key(h);u.indexOf(f)===0&&localStorage.removeItem(u)}});return m(o,r),o}function hr(r,s){var o=this;r=I(r);var f=o.ready().then(function(){var h=o._dbInfo,u=localStorage.getItem(h.keyPrefix+r);return u&&(u=h.serializer.deserialize(u)),u});return m(f,s),f}function gr(r,s){var o=this,f=o.ready().then(function(){for(var h=o._dbInfo,u=h.keyPrefix,p=u.length,b=localStorage.length,$=1,S=0;S<b;S++){var x=localStorage.key(S);if(x.indexOf(u)===0){var C=localStorage.getItem(x);if(C&&(C=h.serializer.deserialize(C)),C=r(C,x.substring(p),$++),C!==void 0)return C}}});return m(f,s),f}function vr(r,s){var o=this,f=o.ready().then(function(){var h=o._dbInfo,u;try{u=localStorage.key(r)}catch{u=null}return u&&(u=u.substring(h.keyPrefix.length)),u});return m(f,s),f}function pr(r){var s=this,o=s.ready().then(function(){for(var f=s._dbInfo,h=localStorage.length,u=[],p=0;p<h;p++){var b=localStorage.key(p);b.indexOf(f.keyPrefix)===0&&u.push(b.substring(f.keyPrefix.length))}return u});return m(o,r),o}function yr(r){var s=this,o=s.keys().then(function(f){return f.length});return m(o,r),o}function mr(r,s){var o=this;r=I(r);var f=o.ready().then(function(){var h=o._dbInfo;localStorage.removeItem(h.keyPrefix+r)});return m(f,s),f}function br(r,s,o){var f=this;r=I(r);var h=f.ready().then(function(){s===void 0&&(s=null);var u=s;return new v(function(p,b){var $=f._dbInfo;$.serializer.serialize(s,function(S,x){if(x)b(x);else try{localStorage.setItem($.keyPrefix+r,S),p(u)}catch(C){(C.name==="QuotaExceededError"||C.name==="NS_ERROR_DOM_QUOTA_REACHED")&&b(C),b(C)}})})});return m(h,o),h}function wr(r,s){if(s=k.apply(this,arguments),r=typeof r!="function"&&r||{},!r.name){var o=this.config();r.name=r.name||o.name,r.storeName=r.storeName||o.storeName}var f=this,h;return r.name?h=new v(function(u){r.storeName?u(pn(r,f._defaultConfig)):u(r.name+"/")}).then(function(u){for(var p=localStorage.length-1;p>=0;p--){var b=localStorage.key(p);b.indexOf(u)===0&&localStorage.removeItem(b)}}):h=v.reject("Invalid arguments"),m(h,s),h}var _r={_driver:"localStorageWrapper",_initStorage:fr,_support:sr(),iterate:gr,getItem:hr,setItem:br,removeItem:mr,clear:dr,length:yr,key:vr,keys:pr,dropInstance:wr},$r=function(s,o){return s===o||typeof s=="number"&&typeof o=="number"&&isNaN(s)&&isNaN(o)},Sr=function(s,o){for(var f=s.length,h=0;h<f;){if($r(s[h],o))return!0;h++}return!1},yn=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},it={},mn={},Ke={INDEXEDDB:Ot,WEBSQL:lr,LOCALSTORAGE:_r},xr=[Ke.INDEXEDDB._driver,Ke.WEBSQL._driver,Ke.LOCALSTORAGE._driver],yt=["dropInstance"],Wt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(yt),Er={description:"",driver:xr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Cr(r,s){r[s]=function(){var o=arguments;return r.ready().then(function(){return r[s].apply(r,o)})}}function Ut(){for(var r=1;r<arguments.length;r++){var s=arguments[r];if(s)for(var o in s)s.hasOwnProperty(o)&&(yn(s[o])?arguments[0][o]=s[o].slice():arguments[0][o]=s[o])}return arguments[0]}var Ar=function(){function r(s){c(this,r);for(var o in Ke)if(Ke.hasOwnProperty(o)){var f=Ke[o],h=f._driver;this[o]=h,it[h]||this.defineDriver(f)}this._defaultConfig=Ut({},Er),this._config=Ut({},this._defaultConfig,s),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return r.prototype.config=function(o){if((typeof o>"u"?"undefined":l(o))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var f in o){if(f==="storeName"&&(o[f]=o[f].replace(/\W/g,"_")),f==="version"&&typeof o[f]!="number")return new Error("Database version must be a number.");this._config[f]=o[f]}return"driver"in o&&o.driver?this.setDriver(this._config.driver):!0}else return typeof o=="string"?this._config[o]:this._config},r.prototype.defineDriver=function(o,f,h){var u=new v(function(p,b){try{var $=o._driver,S=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!o._driver){b(S);return}for(var x=Wt.concat("_initStorage"),C=0,O=x.length;C<O;C++){var G=x[C],z=!Sr(yt,G);if((z||o[G])&&typeof o[G]!="function"){b(S);return}}var ee=function(){for(var ot=function(Dr){return function(){var Tr=new Error("Method "+Dr+" is not implemented by the current driver"),bn=v.reject(Tr);return m(bn,arguments[arguments.length-1]),bn}},Gt=0,Nr=yt.length;Gt<Nr;Gt++){var Yt=yt[Gt];o[Yt]||(o[Yt]=ot(Yt))}};ee();var Q=function(ot){it[$]&&console.info("Redefining LocalForage driver: "+$),it[$]=o,mn[$]=ot,p()};"_support"in o?o._support&&typeof o._support=="function"?o._support().then(Q,b):Q(!!o._support):Q(!0)}catch(be){b(be)}});return E(u,f,h),u},r.prototype.driver=function(){return this._driver||null},r.prototype.getDriver=function(o,f,h){var u=it[o]?v.resolve(it[o]):v.reject(new Error("Driver not found."));return E(u,f,h),u},r.prototype.getSerializer=function(o){var f=v.resolve(Ft);return E(f,o),f},r.prototype.ready=function(o){var f=this,h=f._driverSet.then(function(){return f._ready===null&&(f._ready=f._initDriver()),f._ready});return E(h,o,o),h},r.prototype.setDriver=function(o,f,h){var u=this;yn(o)||(o=[o]);var p=this._getSupportedDrivers(o);function b(){u._config.driver=u.driver()}function $(C){return u._extend(C),b(),u._ready=u._initStorage(u._config),u._ready}function S(C){return function(){var O=0;function G(){for(;O<C.length;){var z=C[O];return O++,u._dbInfo=null,u._ready=null,u.getDriver(z).then($).catch(G)}b();var ee=new Error("No available storage method found.");return u._driverSet=v.reject(ee),u._driverSet}return G()}}var x=this._driverSet!==null?this._driverSet.catch(function(){return v.resolve()}):v.resolve();return this._driverSet=x.then(function(){var C=p[0];return u._dbInfo=null,u._ready=null,u.getDriver(C).then(function(O){u._driver=O._driver,b(),u._wrapLibraryMethodsWithReady(),u._initDriver=S(p)})}).catch(function(){b();var C=new Error("No available storage method found.");return u._driverSet=v.reject(C),u._driverSet}),E(this._driverSet,f,h),this._driverSet},r.prototype.supports=function(o){return!!mn[o]},r.prototype._extend=function(o){Ut(this,o)},r.prototype._getSupportedDrivers=function(o){for(var f=[],h=0,u=o.length;h<u;h++){var p=o[h];this.supports(p)&&f.push(p)}return f},r.prototype._wrapLibraryMethodsWithReady=function(){for(var o=0,f=Wt.length;o<f;o++)Cr(this,Wt[o])},r.prototype.createInstance=function(o){return new r(o)},r}(),Ir=new Ar;i.exports=Ir},{3:3}]},{},[4])(4)})})(Wn);var ti=Wn.exports;const He=ei(ti),[ni,At]=B({show:!1,title:"",message:""});function Un(e){e=new Date(e);let t=e.getMonth()+1;t<10&&(t=`0${t}`);let n=e.getDate();return n<10&&(n=`0${n}`),`${n}.${t}.${e.getFullYear()}`}function ri(e){e=new Date(e);let t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=e.getMonth(),i=String(e.getFullYear());return`${t[n]} ${i.substring(2,4)}`}function nn(e){e=new Date(e);let t=e.getMonth()+1;t<10&&(t=`0${t}`);let n=e.getDate();return n<10&&(n=`0${n}`),`${e.getFullYear()}-${t}-${n}`}function Ee(e){return e=new Date(e),Number(e)}function ii(){let t=new Date(Date.now()).getDate()+1;return t<10&&(t=`0${t}`),String(t)}function Ge(){let t=new Date(Date.now()).getMonth()+1;return t<10&&(t=`0${t}`),t}function Ie(){let t=new Date(Date.now()).getFullYear();return String(t)}function En(e,t){return new Date(e,Number(t),0).getDate()}function rn(){return Ee(new Date(Ie(),Ge(),ii()))}He.config({name:"work-diary"});const[Ce,ut]=B([]),[Ne,on]=B({sections:[]});function oi(){He.getItem("gardenPlan").then(e=>{e&&on(JSON.parse(e))}).catch(e=>console.log(e))}function Cn(){let e=JSON.stringify(Ne());He.setItem("gardenPlan",e).catch(t=>console.log(t))}function ai(){He.getItem("diary").then(e=>{e&&ut(JSON.parse(e))}).catch(e=>console.log(e))}function It(){let e=JSON.stringify(Ce());He.setItem("diary",e).catch(t=>console.log(t))}const li=()=>{let e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(Ce())),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","diary-export.json"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},si=e=>{let t=new FileReader;t.onload=n=>{try{let i=JSON.parse(n.target.result);ut(i),It()}catch(i){At({show:!0,title:"error importing file",message:e.name+" "+i})}},t.onerror=n=>{console.log(n),At({show:!0,title:"error",message:"error importing diary data"})},t.readAsText(e)},[ht,Gn]=B([{name:"keine Kultur gewÃ¤hlt",id:"none"},{name:"Kartoffeln",id:"1"},{name:"Karotten",id:"2"},{name:"Bohnen",id:"3"},{name:"Salat",id:"4"}]);function Yn(){He.getItem("cultures").then(e=>{e&&Gn(JSON.parse(e))}).catch(e=>console.log(e))}function ui(){let e=JSON.stringify(ht());He.setItem("cultures",e).catch(t=>console.log(t))}function ci(e){return ht().find(n=>n.id===e).name}async function fi(e){let t=[],n=94608e6;return Ce().forEach(i=>{i.correspondingBed?.id===e&&(i.category==="Aussaat"||i.category==="Pflanzen/Setzen")&&i.culture!=="none"&&Date.now()-i.date<n&&t.push({rawDate:i.date,date:ri(i.date),category:i.category,culture:ci(i.culture)})}),t=t.sort((i,a)=>a.rawDate-i.rawDate),t}const an=Symbol("store-raw"),qe=Symbol("store-node"),De=Symbol("store-has"),zn=Symbol("store-self");function jn(e){let t=e[Ye];if(!t&&(Object.defineProperty(e,Ye,{value:t=new Proxy(e,gi)}),!Array.isArray(e))){const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let a=0,l=n.length;a<l;a++){const c=n[a];i[c].get&&Object.defineProperty(e,c,{enumerable:i[c].enumerable,get:i[c].get.bind(t)})}}return t}function Nt(e){let t;return e!=null&&typeof e=="object"&&(e[Ye]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ct(e,t=new Set){let n,i,a,l;if(n=e!=null&&e[an])return n;if(!Nt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let c=0,d=e.length;c<d;c++)a=e[c],(i=ct(a,t))!==a&&(e[c]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const c=Object.keys(e),d=Object.getOwnPropertyDescriptors(e);for(let g=0,_=c.length;g<_;g++)l=c[g],!d[l].get&&(a=e[l],(i=ct(a,t))!==a&&(e[l]=i))}return e}function Dt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ft(e,t,n){if(e[t])return e[t];const[i,a]=B(n,{equals:!1,internal:!0});return i.$=a,e[t]=i}function di(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Ye||t===qe||(delete n.value,delete n.writable,n.get=()=>e[Ye][t]),n}function Hn(e){Xt()&&ft(Dt(e,qe),zn)()}function hi(e){return Hn(e),Reflect.ownKeys(e)}const gi={get(e,t,n){if(t===an)return e;if(t===Ye)return n;if(t===Qt)return Hn(e),n;const i=Dt(e,qe),a=i[t];let l=a?a():e[t];if(t===qe||t===De||t==="__proto__")return l;if(!a){const c=Object.getOwnPropertyDescriptor(e,t);Xt()&&(typeof l!="function"||e.hasOwnProperty(t))&&!(c&&c.get)&&(l=ft(i,t,l)())}return Nt(l)?jn(l):l},has(e,t){return t===an||t===Ye||t===Qt||t===qe||t===De||t==="__proto__"?!0:(Xt()&&ft(Dt(e,De),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:hi,getOwnPropertyDescriptor:di};function Tt(e,t,n,i=!1){if(!i&&e[t]===n)return;const a=e[t],l=e.length;n===void 0?(delete e[t],e[De]&&e[De][t]&&a!==void 0&&e[De][t].$()):(e[t]=n,e[De]&&e[De][t]&&a===void 0&&e[De][t].$());let c=Dt(e,qe),d;if((d=ft(c,t,a))&&d.$(()=>n),Array.isArray(e)&&e.length!==l){for(let g=e.length;g<l;g++)(d=c[g])&&d.$();(d=ft(c,"length",l))&&d.$(e.length)}(d=c[zn])&&d.$()}function Vn(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i+=1){const a=n[i];Tt(e,a,t[a])}}function vi(e,t){if(typeof t=="function"&&(t=t(e)),t=ct(t),Array.isArray(t)){if(e===t)return;let n=0,i=t.length;for(;n<i;n++){const a=t[n];e[n]!==a&&Tt(e,n,a)}Tt(e,"length",i)}else Vn(e,t)}function at(e,t,n=[]){let i,a=e;if(t.length>1){i=t.shift();const c=typeof i,d=Array.isArray(e);if(Array.isArray(i)){for(let g=0;g<i.length;g++)at(e,[i[g]].concat(t),n);return}else if(d&&c==="function"){for(let g=0;g<e.length;g++)i(e[g],g)&&at(e,[g].concat(t),n);return}else if(d&&c==="object"){const{from:g=0,to:_=e.length-1,by:y=1}=i;for(let v=g;v<=_;v+=y)at(e,[v].concat(t),n);return}else if(t.length>1){at(e[i],t,[i].concat(n));return}a=e[i],n=[i].concat(n)}let l=t[0];typeof l=="function"&&(l=l(a,n),l===a)||i===void 0&&l==null||(l=ct(l),i===void 0||Nt(a)&&Nt(l)&&!Array.isArray(l)?Vn(a,l):Tt(e,i,l))}function pi(...[e,t]){const n=ct(e||{}),i=Array.isArray(n),a=jn(n);function l(...c){Pr(()=>{i&&c.length===1?vi(n,c[0]):at(n,c)})}return[a,l]}const se=Br();function yi(e){const[t,n]=B(!1),[i,a]=B(null),[l,c]=B(!1),[d,g]=B(!1),[_,y]=B(!1),[v,m]=B(!1),[E,I]=B(!1),[k,T]=B(!1),[R,A]=B(!1),[U,M]=pi({return:null,highlight:null}),w=()=>({done:"both",dateBegin:0,dateEnd:rn(),category:"All"}),[D,N]=B(w()),P=()=>N(w()),j=()=>Ce().filter(V=>V.date>=D().dateBegin&&V.date<=D().dateEnd&&(D().done==="both"||D().done==="done"&&V.done===!0||D().done==="pending"&&V.done===!1)&&(D().category==="All"||D().category===V.category)),H=["Pflege","Pflanzen/Setzen","Aussaat","Ernten","Boden","Pflanzenschutz","Anzucht","Umgebungsarbeiten","Anderes"];return Y(se.Provider,{value:{showEditor:t,setShowEditor:n,openToEdit:i,setOpenToEdit:a,deleteHot:l,setDeleteHot:c,showMenu:d,setShowMenu:g,categorys:H,toastMessage:ni,setToastMessage:At,showReport:_,setShowReport:y,showFilter:v,setShowFilter:m,filter:D,setFilter:N,resetFilter:P,filteredDiary:j,showGardenMap:E,setShowGardenMap:I,showGardenMapEditor:k,setShowGardenMapEditor:T,bedCommunication:U,setBedCommunication:M,showCulturesEditor:R,setShowCulturesEditor:A},get children(){return e.children}})}var mi=q('<article><header><button class="icon-button outline"><i class="fa-solid fa-pencil"></i></button><button class="icon-button outline"><i class="fa-solid fa-trash-can"></i> </button></header><div><h6></h6><h6> </h6><h6></h6></div><p></p><footer><div class=diary-grid-1><label><input type=checkbox>done</label><p></p><p><i class="fa-regular fa-clock"></i><mark> minutes');function bi(e){const{setOpenToEdit:t,deleteHot:n}=fe(se),i=l=>{ut([...Ce().map(c=>c.id===l.id?{...c,done:!c.done}:c=c)]),console.log(Ce()),It()},a=l=>l.culture==="none"?"-":ht().find(d=>d.id===l.culture)?.name;return(()=>{var l=mi(),c=l.firstChild,d=c.firstChild,g=d.nextSibling,_=g.firstChild,y=c.nextSibling,v=y.firstChild,m=v.nextSibling;m.firstChild;var E=m.nextSibling,I=y.nextSibling,k=I.nextSibling,T=k.firstChild,R=T.firstChild,A=R.firstChild,U=R.nextSibling,M=U.nextSibling,w=M.firstChild,D=w.nextSibling,N=D.firstChild;return d.$$click=()=>t(e.entry.id),g.$$click=()=>e.deleteEntry(e.entry.id),y.style.setProperty("display","grid"),y.style.setProperty("grid-template-columns","1fr 2fr 1fr"),y.style.setProperty("gap",".5rem"),W(v,()=>e.entry.category),W(m,()=>a(e.entry),null),W(E,()=>e.entry.correspondingBed?.name),I.style.setProperty("white-space","pre-wrap"),W(I,()=>e.entry.work),A.$$click=()=>i(e.entry),W(U,()=>Un(e.entry.date)),w.style.setProperty("font-size","1.3rem"),W(D,()=>e.entry.duration,N),F(()=>(n()===e.entry.id?"var(--pico-del-color)":"var(--pico-primary)")!=null?_.style.setProperty("color",n()===e.entry.id?"var(--pico-del-color)":"var(--pico-primary)"):_.style.removeProperty("color")),F(()=>A.checked=e.entry.done),l})()}we(["click"]);var wi=q('<button class="float primary"id=floating-button><i class="fa-solid fa-plus fa-2xl float-icon">');function _i(e){const{showEditor:t,setShowEditor:n,showReport:i}=fe(se),[a,l]=B();return Re(()=>{setInterval(()=>{l(!0),setTimeout(()=>l(!1),400)},7e3)}),Y(Mn,{get when(){return!i()},get children(){var c=wi();return c.$$click=()=>n(!t()),F(()=>ye(c,"buzz",a())),c}})}we(["click"]);let wt;const $i=new Uint8Array(16);function Si(){if(!wt&&(wt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wt($i)}const ie=[];for(let e=0;e<256;++e)ie.push((e+256).toString(16).slice(1));function xi(e,t=0){return ie[e[t+0]]+ie[e[t+1]]+ie[e[t+2]]+ie[e[t+3]]+"-"+ie[e[t+4]]+ie[e[t+5]]+"-"+ie[e[t+6]]+ie[e[t+7]]+"-"+ie[e[t+8]]+ie[e[t+9]]+"-"+ie[e[t+10]]+ie[e[t+11]]+ie[e[t+12]]+ie[e[t+13]]+ie[e[t+14]]+ie[e[t+15]]}let An,jt,Ht=0,Vt=0;function Rt(e,t,n){let i=t&&n||0;const a=t||new Array(16);e=e||{};let l=e.node||An,c=e.clockseq!==void 0?e.clockseq:jt;if(l==null||c==null){const m=e.random||(e.rng||Si)();l==null&&(l=An=[m[0]|1,m[1],m[2],m[3],m[4],m[5]]),c==null&&(c=jt=(m[6]<<8|m[7])&16383)}let d=e.msecs!==void 0?e.msecs:Date.now(),g=e.nsecs!==void 0?e.nsecs:Vt+1;const _=d-Ht+(g-Vt)/1e4;if(_<0&&e.clockseq===void 0&&(c=c+1&16383),(_<0||d>Ht)&&e.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ht=d,Vt=g,jt=c,d+=122192928e5;const y=((d&268435455)*1e4+g)%4294967296;a[i++]=y>>>24&255,a[i++]=y>>>16&255,a[i++]=y>>>8&255,a[i++]=y&255;const v=d/4294967296*1e4&268435455;a[i++]=v>>>8&255,a[i++]=v&255,a[i++]=v>>>24&15|16,a[i++]=v>>>16&255,a[i++]=c>>>8|128,a[i++]=c&255;for(let m=0;m<6;++m)a[i+m]=l[m];return t||xi(a)}var Ei=q('<dialog><article><header><button class="icon-button outline"><i class="fa-solid fa-circle-xmark"></i></button></header><h4>add new Culture</h4><input type=text placeholder="Name of new Culture"><button> add Culture ');function Ci(){let e;const{showCulturesEditor:t,setShowCulturesEditor:n}=fe(se),[i,a]=B(""),[l,c]=B(!1);pe(()=>{i().length>2&&c(!1)});const d=()=>{i().length<3&&c(!0);let g={name:i(),id:Rt()};Gn([...ht(),g]),ui(),a(""),t(!1)};return(()=>{var g=Ei(),_=g.firstChild,y=_.firstChild,v=y.firstChild,m=y.nextSibling,E=m.nextSibling,I=E.nextSibling;v.$$click=()=>n(!1),E.addEventListener("change",()=>a(e.value));var k=e;return typeof k=="function"?ce(k,E):e=E,I.$$click=()=>d(),F(T=>{var R=t(),A=l();return R!==T.e&&ye(g,"open",T.e=R),A!==T.t&&ye(E,"aria-invalid",T.t=A),T},{e:void 0,t:void 0}),F(()=>E.value=i()),g})()}we(["click"]);var Ai=q('<dialog><article><header><button class="icon-button outline"><i class="fa-solid fa-floppy-disk"></i></button><button class="icon-button outline"><i class="fa-solid fa-circle-xmark"></i></button></header><label><input type=checkbox>done</label><textarea rows=5 cols=40 placeholder="describe work"></textarea><input type=date><label for=duration>duration <mark></mark></label><input type=range id=duration min=0 max=240 step=5><fieldset role=group><input type=text readonly=true placeholder="no bed selected"><button class="secondary outline"><i class="fa-solid fa-location-dot"></i></button></fieldset><fieldset><legend>Kategorie</legend></fieldset><fieldset role=group><select></select><button>Add Cultures'),Ii=q("<label><input type=radio name=category on>"),Ni=q("<option>");let Kt;function Di(e){const{showEditor:t,setShowEditor:n,openToEdit:i,setOpenToEdit:a,categorys:l,showGardenMap:c,setShowGardenMap:d,bedCommunication:g,setBedCommunication:_,showCulturesEditor:y,setShowCulturesEditor:v}=fe(se),m=L=>{t()&&!Kt.contains(L.target)&&!c&&(console.log("here was trigged"),n(!1))};Re(()=>{document.addEventListener("click",m,!0),Yn()}),Pt(()=>{document.removeEventListener("click",m,!0),_({return:null,highlight:!1})}),pe(()=>{t()&&I({id:Date.now(),date:rn(),work:"",category:"Pflege",done:!0,duration:10,culture:0}),i()!==null?E(i()):I({id:Date.now(),date:rn(),work:"",category:"Pflege",done:!0,duration:10})});const E=L=>{const ne=Ce().find(K=>K.id===L);I(ne)},I=L=>{de(L.id),D(L.done),A(L.work),M(L.date),H(L.category),P(L.duration),ae(L.correspondingBed?.id||null),$e(L.correspondingBed?.name||null),_("highlight",L.correspondingBed?.id||null),Se(L.culture||"none")};let k,T;const[R,A]=B(""),[U,M]=B(Date.now()),[w,D]=B(!1),[N,P]=B(10),[j,H]=B("Pflege"),[Z,V]=B(!1),[oe,de]=B(Rt()),[_e,ae]=B(null),[he,$e]=B(null),[Ae,Se]=B("none");function te(L,ne){const[K,ge]=ne();F(()=>L.value=K()),L.oninput=ke=>ge(ke.target.value)}const xe=()=>{if(R().length<1){V(!0);return}let L={id:oe(),work:R(),date:U(),done:w(),duration:N(),category:j(),correspondingBed:{id:_e(),name:he()},culture:Ae()};e.saveNewEntry(L),n(!1),window.scrollTo(0,0)};return pe(lt(()=>R(),()=>V(!1))),pe(()=>{if(g.return&&g.return!==!0){let L=g.return;_("return",null),d(!1),ae(L.id),$e(L.name)}}),(()=>{var L=Ai(),ne=L.firstChild,K=ne.firstChild,ge=K.firstChild,ke=ge.nextSibling,Me=K.nextSibling,Fe=Me.firstChild,Pe=Me.nextSibling,Xe=Pe.nextSibling,gt=Xe.nextSibling,Ot=gt.firstChild,Lt=Ot.nextSibling,ue=gt.nextSibling,vt=ue.nextSibling,Ze=vt.firstChild,Ve=Ze.nextSibling,We=vt.nextSibling;We.firstChild;var et=We.nextSibling,Ue=et.firstChild,pt=Ue.nextSibling;W(L,Y(Ci,{}),ne);var tt=Kt;typeof tt=="function"?ce(tt,ne):Kt=ne,ge.$$click=()=>xe(),ke.$$click=()=>n(!1),Fe.addEventListener("change",()=>D(!w())),Pe.$$input=()=>A(k.value);var nt=k;typeof nt=="function"?ce(nt,Pe):k=Pe,Xe.addEventListener("change",re=>M(Ee(re.target.value))),W(Lt,N),ue.$$input=()=>P(T.value);var rt=T;return typeof rt=="function"?ce(rt,ue):T=ue,Ve.$$click=()=>{_("return",!0),d(!0)},W(We,Y(je,{each:l,children:re=>(()=>{var ve=Ii(),Be=ve.firstChild;return Be.addEventListener("change",()=>H(re)),W(ve,re,null),F(()=>Be.checked=re===j()),ve})()}),null),ce(te,Ue,()=>[Ae,Se]),W(Ue,Y(je,{get each(){return ht()},children:re=>(()=>{var ve=Ni();return W(ve,()=>re.name),F(()=>ve.value=re.id),ve})()})),pt.$$click=()=>v(!0),F(re=>{var ve=t(),Be=Z();return ve!==re.e&&ye(L,"open",re.e=ve),Be!==re.t&&ye(Pe,"aria-invalid",re.t=Be),re},{e:void 0,t:void 0}),F(()=>Fe.checked=w()),F(()=>Pe.value=R()),F(()=>Xe.value=nn(U())),F(()=>ue.value=N()),F(()=>Ze.value=he()),L})()}we(["click","input"]);var Ti=q("<canvas height=600 id=report-canvas>");class Ri{constructor(t){t.width=window.innerWidth*.85,t.height=window.innerHeight*.8,t.style.background="white";let n=t.getContext("2d");n.fillStyle="black",this.canvas=t,this.context=n,console.log("canvas registered..."),this.initialY=25,this.y=this.initialY,this.indent=10}adjustHeight(){this.canvas.height=this.y+10}drawDone(){this.context.font='900 17px "Font Awesome 6 Free"',this.context.fillText("ï",this.indent,this.y)}drawPending(){this.context.font='900 17px "Font Awesome 6 Free"',this.context.fillText("ï",this.indent,this.y)}drawSeparator(){this.context.beginPath(),this.context.fillStyle="black",this.context.moveTo(10,this.y),this.context.lineTo(this.canvas.width-10,this.y),this.context.stroke(),this.y+=22}writeTitle(t){this.context.font="800 25px system-ui",this.context.fillText(t,this.indent,this.y),this.y+=35}writeSubtitle(t){this.y+=10,this.context.font="700 20px system-ui",this.context.fillText(t,this.indent,this.y),this.y+=25}writeCategory(t,n=10){this.context.font="700 15px system-ui",this.context.fillStyle="black",this.context.fillText(t,n,this.y),this.y+=22}writeLine(t,n=10){this.context.font="15px system-ui",this.context.fillStyle="black",this.context.fillText(t,n,this.y),this.y+=22}}function ki(e){let t,n;Re(()=>{console.log("mountex"),n=new Ri(t)});function i(a){a.done?n.drawDone():n.drawPending(),n.writeCategory(a.category.toUpperCase(),35);for(let l of a.work)l.length&&n.writeLine(l,35)}return pe(()=>{let a=e.report;n.y=n.initialY;for(let l=0;l<2;l++)if(a){n.writeTitle("Work Report"),n.writeSubtitle("Zeitaufwand in Periode: "+a.totalTime);for(let c in a.report){n.writeSubtitle(`${c}     ${a.report[c].duration} min`);for(let d of a.report[c].works)i(d);n.drawSeparator()}l===0&&(n.adjustHeight(),n.y=n.initialY)}}),(()=>{var a=Ti(),l=t;return typeof l=="function"?ce(l,a):t=a,a})()}var Pi=q('<article><header><button class="icon-button outline"><i class="fa-solid fa-circle-xmark"></i></button><button class="icon-button outline"><i class="fa-solid fa-share-nodes"></i></button><p>');const[Bi,ln]=B("");function In(e){let t=0;e.forEach(i=>{t+=Number(i.duration)});let n={};return n.totalTime=`${t} min`,n.totalLines=0,n.report={},e.forEach(i=>{let a=Un(i.date);a in n.report||(n.report[a]={works:[],duration:0}),n.report[a].duration+=Number(i.duration);let l=i.work.split(`
`);l=l.filter(c=>c.length>0),n.totalLines+=l.length,n.report[a].works.push({date:a,duration:i.duration,work:l,category:i.category,done:i.done})}),n}function Oi(e,t){for(var n=e.split(","),i=n[0].match(/:(.*?);/)[1],a=atob(n[n.length-1]),l=a.length,c=new Uint8Array(l);l--;)c[l]=a.charCodeAt(l);return new File([c],t,{type:i})}function Li(){var e=document.querySelector("#report-canvas");const t=e.toDataURL("image/png"),n=Oi(t,"report.png");ln("pending"),navigator.share({title:"Work Report",text:"hier ist der neuste Arbeitsraport",files:[n]}).then(()=>{ln("shared successfully")}).catch(i=>At({show:!0,title:"error while sharing report ",message:i}))}function Mi(){const{showReport:e,setShowReport:t,filter:n,filteredDiary:i}=fe(se),[a,l]=B(In(i()));return Re(()=>{ln(" ")}),pe(lt(()=>n(),()=>{console.log("re run generate report"),l(In(i())),console.log(a())})),(()=>{var c=Pi(),d=c.firstChild,g=d.firstChild,_=g.nextSibling,y=_.nextSibling;return g.$$click=()=>t(!1),_.$$click=()=>Li(),W(y,()=>Bi()||" "),W(c,Y(ki,{get report(){return a()}}),null),c})()}we(["click"]);var Fi=q('<dialog><article><header><button class="icon-button outline"><i class="fa-solid fa-circle-xmark"></i></button><span><strong>Garden Map Editor </strong></span><div class=card><h4>Add new Section</h4><label>section Name<input name=sectionNameField placeholder="Name of new Section"></label><button>add Section</button></div><div class=card><h4>Add new Bed</h4><label>select Section<select><option>please choose section</option></select></label><label>bed Name<input name=bedNameField placeholder="Name of new bed"readonly=true></label><button>add Section'),Wi=q("<option>");function Ui(){let e,t,n;const{showGardenMapEditor:i,setShowGardenMapEditor:a}=fe(se),[l,c]=B(""),[d,g]=B(!1),[_,y]=B(""),[v,m]=B(!1);let E=null;pe(()=>{l().length>2&&g(!1)});const I=()=>{if(l().length<3){g(!0);return}if(Ne().sections.find(A=>A.name===l())){g(!0);return}let R=Rt();Ne().sections.push({name:l(),id:R,beds:[]}),on({...Ne()}),Cn(),c(""),g(!1)},k=R=>{if(R==="null"){m(!0);return}else m(!1);let A=Ne().sections.find(M=>String(M.id)===String(R));E=A;let U=A.beds.length+1;y(`${A.name} ${U}`)},T=()=>{E.beds.push({name:_(),id:Rt()}),on({...Ne()}),Cn(),n.value="null",y("")};return(()=>{var R=Fi(),A=R.firstChild,U=A.firstChild,M=U.firstChild,w=M.nextSibling,D=w.nextSibling,N=D.firstChild,P=N.nextSibling,j=P.firstChild,H=j.nextSibling,Z=P.nextSibling,V=D.nextSibling,oe=V.firstChild,de=oe.nextSibling,_e=de.firstChild,ae=_e.nextSibling,he=ae.firstChild,$e=de.nextSibling,Ae=$e.firstChild,Se=Ae.nextSibling,te=$e.nextSibling;A.style.setProperty("min-height","100vh"),M.$$click=()=>a(!1),w.style.setProperty("font-size","1.5rem"),H.$$input=()=>c(e.value);var xe=e;typeof xe=="function"?ce(xe,H):e=H,Z.$$click=()=>I(l()),ae.addEventListener("change",()=>k(n.value));var L=n;typeof L=="function"?ce(L,ae):n=ae,he.value=null,W(ae,Y(je,{get each(){return Ne().sections},children:K=>(()=>{var ge=Wi();return W(ge,()=>K.name),F(()=>ge.value=K.id),ge})()}),null);var ne=t;return typeof ne=="function"?ce(ne,Se):t=Se,te.$$click=()=>T(_()),F(K=>{var ge=i(),ke=d(),Me=v(),Fe=!_();return ge!==K.e&&ye(R,"open",K.e=ge),ke!==K.t&&ye(H,"aria-invalid",K.t=ke),Me!==K.a&&ye(ae,"aria-invalid",K.a=Me),Fe!==K.o&&(te.disabled=K.o=Fe),K},{e:void 0,t:void 0,a:void 0,o:void 0}),F(()=>H.value=l()),F(()=>Se.value=_()),R})()}we(["click","input"]);var Gi=q("<div class=section><h4>");function Yi(e){return(()=>{var t=Gi(),n=t.firstChild;return W(n,()=>e.section.name),W(t,()=>e.children,null),t})()}var zi=q("<span class=history-index>"),ji=q("<div><div class=bed-content><h6></h6><p></p><p>"),Hi=q("<span> ");function Vi(e){let t;const{bedCommunication:n,setBedCommunication:i,setShowGardenMap:a,showGardenMap:l}=fe(se),[c,d]=B([]),[g,_]=B(0),[y,v]=B(!1),m=()=>{_(g()+1),g()>c().length-1&&_(0),t=setTimeout(()=>m(),2e3)};pe(lt(()=>l(),async()=>{t&&clearTimeout(t),d(await fi(e.bed.id)),t=setTimeout(()=>m(),2e3)}));const E=()=>{n.return===!0&&(i("return",e.bed),a(!1))};return pe(()=>{n.highlight===e.bed.id?v(!0):v(!1)}),(()=>{var I=ji(),k=I.firstChild,T=k.firstChild,R=T.nextSibling,A=R.nextSibling;return I.$$click=()=>E(),W(T,()=>e.bed.name),W(R,()=>c()[g()]?.date),W(k,Y(Mn,{get when(){return c().length>0},get fallback(){return Hi()},get children(){var U=zi();return W(U,()=>g()+1),U}}),A),W(A,()=>c()[g()]?.culture),F(()=>Hr(I,y()?"bed highlight":"bed")),I})()}we(["click"]);var Ki=q('<dialog><article><header><button class="icon-button outline"><i class="fa-solid fa-circle-xmark"></i></button><button class="icon-button outline"><i class="fa-solid fa-pencil"></i></button><span><strong>Garden Map');function Ji(){const{showGardenMap:e,setShowGardenMap:t,showGardenMapEditor:n,setShowGardenMapEditor:i,bedCommunication:a,setBedCommunication:l}=fe(se),c={};return Re(()=>{oi(),Yn()}),(()=>{var d=Ki(),g=d.firstChild,_=g.firstChild,y=_.firstChild,v=y.nextSibling,m=v.nextSibling;return W(d,Y(Ui,{}),g),g.style.setProperty("min-height","100vh"),y.$$click=()=>t(!1),v.$$click=()=>i(!n()),m.style.setProperty("font-size","1.5rem"),W(g,Y(je,{get each(){return Ne().sections},children:(E,I)=>Y(Yi,{section:E,get children(){return Y(je,{get each(){return Ne().sections[I()].beds},children:k=>Y(Vi,{get highlight(){return a.highlight},ref(T){var R=c[k.id];typeof R=="function"?R(T):c[k.id]=T},bed:k})})}})}),null),F(()=>ye(d,"open",e())),d})()}we(["click"]);var qi=q("<div>");function Qi(){const{showEditor:e,setShowEditor:t,openToEdit:n,setOpenToEdit:i,deleteHot:a,setDeleteHot:l,showReport:c,filteredDiary:d}=fe(se);Re(async()=>{ai()});const g=async y=>{console.log("setting new entry"),ut([y,...Ce().filter(v=>v.id!==y.id)]),console.log(Ce()),It()},_=async y=>{if(a()===!1){l(y),setTimeout(()=>l(!1),2e3);return}a()===y?(ut(Ce().filter(v=>v.id!==y)),It()):l(y)};return pe(lt(()=>n(),()=>{n()!==null&&t(!0)})),pe(lt(()=>e(),()=>{e()===!1&&i(null)})),(()=>{var y=qi();return W(y,Y(_i,{}),null),W(y,Y(Di,{saveNewEntry:g}),null),W(y,Y(Ji,{}),null),W(y,Y(Yr,{get children(){return[Y(_n,{get when(){return!c()},get children(){return Y(je,{get each(){return d()},children:v=>Y(bi,{entry:v,deleteEntry:_})})}}),Y(_n,{get when(){return c()},get children(){return Y(Mi,{})}})]}}),null),y})()}var Xi=q('<nav><ul><li><h2><i class="fa-solid fa-person-digging"></i></h2></li></ul><ul><li><h6>Work Diary</h6></li></ul><ul><li><button class="icon-button outline no-outline"><i class="fa-solid fa-filter"></i></button></li><li><button class="icon-button outline no-outline"><i class="fa-solid fa-location-dot"></i></button></li><li><button class="icon-button outline no-outline"><i class="fa-solid fa-bars">');function Zi(){const{showMenu:e,setShowMenu:t,showFilter:n,setShowFilter:i,setShowGardenMap:a}=fe(se);return(()=>{var l=Xi(),c=l.firstChild,d=c.nextSibling,g=d.nextSibling,_=g.firstChild,y=_.firstChild,v=_.nextSibling,m=v.firstChild,E=v.nextSibling,I=E.firstChild;return y.$$click=()=>i(!n()),m.$$click=()=>{a(!0)},I.$$click=()=>t(!e()),l})()}we(["click"]);var eo=q('<dialog><article><header><button class="icon-button outline"><i class="fa-solid fa-circle-xmark"></i></button><button class="icon-button outline"><i class="fa-solid fa-location-dot"></i></button></header><button>generate Report</button><hr><h6>export Data</h6><p>exports current data to your device<br>this can serve as an update</p><button>export Diary</button><hr><h6>import diary data</h6><p><mark>Caution!</mark> Existing data will be overwritten.</p><input type=file><button>import Diary');let Jt,qt;function to(e){const{showMenu:t,setShowMenu:n,showReport:i,setShowReport:a,showGardenMap:l,setShowGardenMap:c}=fe(se),d=g=>{t()&&(Jt.contains(g.target)||n(!1))};return Re(()=>{document.addEventListener("click",d,!0)}),Pt(()=>{document.removeEventListener("click",d,!0)}),(()=>{var g=eo(),_=g.firstChild,y=_.firstChild,v=y.firstChild,m=v.nextSibling,E=y.nextSibling,I=E.nextSibling,k=I.nextSibling,T=k.nextSibling,R=T.nextSibling,A=R.nextSibling,U=A.nextSibling,M=U.nextSibling,w=M.nextSibling,D=w.nextSibling,N=Jt;typeof N=="function"?ce(N,_):Jt=_,v.$$click=()=>n(!1),m.$$click=()=>{c(!0),n(!1)},E.$$click=()=>{a(!0),n(!1)},R.$$click=()=>{li(),n(!1)};var P=qt;return typeof P=="function"?ce(P,w):qt=w,D.$$click=()=>{si(qt.files[0]),n(!1)},D.style.setProperty("background-color","var(--pico-del-color)"),F(()=>ye(g,"open",t())),g})()}we(["click"]);var no=q("<div id=toast><h3></h3><p>");function ro(){const{toastMessage:e,setToastMessage:t}=fe(se);return pe(()=>{e().show&&setTimeout(()=>t(n=>({title:n.title,message:n.message,show:!1})),3e3)}),(()=>{var n=no(),i=n.firstChild,a=i.nextSibling;return W(i,()=>e().title),W(a,()=>e().message),F(()=>ye(n,"open",e().show)),n})()}var io=q('<dialog><article><header><button class="icon-button outline"><i class="fa-solid fa-caret-left"></i></button><button class="icon-button outline"><i class="fa-solid fa-filter-circle-xmark"></i></button></header><label>starting from:<input type=date></label><label>ending at:<input type=date></label><button>this year</button><button>this month</button><button>last month</button><fieldset><legend>done/pending</legend><label><input type=radio name=done-pending>done</label><label><input type=radio name=done-pending>pending</label><label><input type=radio name=done-pending>both</label></fieldset><fieldset><legend>Kategorie'),oo=q("<label><input type=radio>");function ao(){const{showFilter:e,setShowFilter:t,setFilter:n,resetFilter:i,filter:a,categorys:l}=fe(se);let c,d,g;const _=E=>{e()&&(c.contains(E.target)||t(!1))};Re(()=>{document.addEventListener("click",_,!0)}),Pt(()=>{document.removeEventListener("click",_,!0)});const y=()=>{n({...a(),dateBegin:Ee(`${Ie()}-01-01`)}),n({...a(),dateEnd:Ee(`${Ie()}-12-31`)})},v=()=>{n({...a(),dateBegin:Ee(`${Ie()}-${Ge()}-1`)}),n({...a(),dateEnd:Ee(`${Ie()}-${Ge()}-${En(Ie(),Ge())}`)})},m=()=>{n({...a(),dateBegin:Ee(`${Ie()}-${Number(Ge())-1}-1`)}),n({...a(),dateEnd:Ee(`${Ie()}-${Number(Ge())-1}-${En(Ie(),Number(Ge())-1)}`)})};return(()=>{var E=io(),I=E.firstChild,k=I.firstChild,T=k.firstChild,R=T.nextSibling,A=k.nextSibling,U=A.firstChild,M=U.nextSibling,w=A.nextSibling,D=w.firstChild,N=D.nextSibling,P=w.nextSibling,j=P.nextSibling,H=j.nextSibling,Z=H.nextSibling,V=Z.firstChild,oe=V.nextSibling,de=oe.firstChild,_e=oe.nextSibling,ae=_e.firstChild,he=_e.nextSibling,$e=he.firstChild,Ae=Z.nextSibling;Ae.firstChild;var Se=c;typeof Se=="function"?ce(Se,I):c=I,T.$$click=()=>t(!1),R.$$click=()=>i(),M.addEventListener("change",()=>n({...a(),dateBegin:Ee(d.value)}));var te=d;typeof te=="function"?ce(te,M):d=M,N.addEventListener("change",()=>n({...a(),dateEnd:Ee(g.value)}));var xe=g;return typeof xe=="function"?ce(xe,N):g=N,P.$$click=()=>y(),j.$$click=()=>v(),H.$$click=()=>m(),de.addEventListener("change",()=>n({...a(),done:"done"})),ae.addEventListener("change",()=>n({...a(),done:"pending"})),$e.addEventListener("change",()=>n({...a(),done:"both"})),W(Ae,Y(je,{get each(){return[...l,"All"]},children:L=>(()=>{var ne=oo(),K=ne.firstChild;return K.addEventListener("change",()=>n({...a(),category:L})),ye(K,"name",L),W(ne,L,null),F(()=>K.checked=L===a().category),ne})()}),null),F(()=>ye(E,"open",e())),F(()=>M.value=a().dateBegin?nn(a().dateBegin):null),F(()=>N.value=nn(a().dateEnd)),F(()=>de.checked=a().done==="done"),F(()=>ae.checked=a().done==="pending"),F(()=>$e.checked=a().done==="both"),E})()}we(["click"]);var lo=q("<div class=card><dialog><h4>Like to get Notified?</h4><button>activate notifications");function so(){fe(se);const[e,t]=B(!1);return Re(async()=>{Qr(),await Xr()||t(!0)}),[Y(Zi,{}),Y(to,{}),Y(ao,{}),Y(ro,{}),(()=>{var n=lo(),i=n.firstChild,a=i.firstChild,l=a.nextSibling;return l.$$click=()=>{Zr(),t(!1)},F(()=>i.open=e()),n})(),Y(Qi,{})]}we(["click"]);const uo=document.getElementById("root");jr(()=>Y(yi,{get children(){return Y(so,{})}}),uo);
